# Warcraft 3 All-Battle
Карта, в которой симулируются битвы между войсками и героями. Все происходит в автоматическом режиме, игроку остается лишь наблюдать за происходящим.

## Сборка карты
1. Установите [Cheapack](https://xgm.guru/p/wc3/cheapack)
2. Создайте файл build.lua со следующим содержимым:
```lua
require 'build' {
    game = [[<путь к папке x86_64, где находится игра>]], -- необходимо, если собираетесь запускать игру из-под IDE
    run = nil, -- Можно изменить при желании
    src = {
        'src\\lib',
        'src\\inc',
        'src\\data.lua',
        'src\\frames.lua',
        'src\\main.lua'
    } -- Порядок важен!
}
```
3. ???
4. Profit! Можно собирать и экспериментировать.

## Немного пояснений
В исходниках можно найти много мест с различными переменными и константами, которые влияют на параметры карты. Приведу несколько основных из них:

### main.lua
`FOOD_LIMIT` - отвечает за лимит пищи каждой из сторон. Количество войск укладывается в это число (при лимите в 100 ед. и потреблении пищи юнита в 2 ед. будет 50 воинов, при 3 ед. - 33, 4 - 25 и т.д.) \
`leftSideSpawnData`, `rightSideSpawnData` - текущие индексы волн для каждой из сторон. Чтобы битва начиналась с других юнитов, необходимо изменить следующие параметры каждой из переменной:
- raceIndex - индекс расы, согласно данным из `unitGroups` в `data.lua`
- unitIndex - индекс юнита, согласно `unit_codes` из таблицы `unitGroups`

### data.lua
`unitGroups` - в этой таблице задается список рас, а также для каждой из них список идентификаторов (raw-кодов) юнитов `unit_codes`, которые будут участвовать в стычках. \
`upgrades` - список идентификаторов улучшений, от которых зависят вышеуказанные юниты. Необходимо обновлять вручную (или написать скрипт, который это сделает за вас) \
`heroAbilities` - идентификаторы способностей, доступные героям для изучения. Необходимо обновлять вручную (или написать скрипт, который это сделает за вас) \
`SPELL_IMMUNE_ABILITIES` - список идентификаторов способностей, дающих невосприимчивость к магии \
`ANTI_AIR_ABILITIES` - список идентификаторов способностей, которые способны открыть возможность атаковать воздух (к примеру, Ловчий, Паутина)